{% extends 'base.html' %}


{% block title %} Detail {% endblock %}


{% block content %} 

{% if messages %}
  <ul class="messages">
    {% for message in messages %}
      <li class="{{ message.tags }}">{{ message }}</li>
    {% endfor %}
  </ul>
{% endif %}


<div class="d-flex justify-content-between align-items-center">
  <h1>{{object.title}}</h1>  
  <div>
     {% if perms.core.delete_post %}
    <button  class="btn btn-danger btn-sm" data-bs-toggle="modal" data-bs-target="#deleteModal">Oshiriw</button>
    {% endif %}
     {% if perms.core.change_post %}
    <a href="/posts/{{object.id}}/edit/" class="btn btn-warning btn-sm">Ozgertiw</a>
    {% endif %}
  </div>
</div>
<p>{{object.content}}</p>
 
<p>Author: {{object.user}} </p>
<p>Post jazilgan waqti: {{object.created_at}}</p>

<!-- Like Dislike Form -->
{% comment %} <form action="user_action_update/" method="post">
  {% csrf_token %}
  <label for="like">Like</label>
  <input  type="radio" name="action" value="like" id="like"  {% if user_post_action.liked %} checked {% endif %}>
  <label for="dislike">Dislike</label>
  <input type="radio" name="action" value="dislike" id="dislike" {% if user_post_action.disliked %} checked {% endif %}>
  <input type="submit" value="Submit" class="btn btn-primary">
</form>
<hr> {% endcomment %}

<form action="user_action_update/" method="post" class="d-flex align-items-center gap-3">
  {% csrf_token %}

  <!-- Like button -->
  <button type="submit" name="action" value="like"
          class="btn {% if user_post_action and user_post_action.liked %}btn-success{% else %}btn-outline-success{% endif %} d-flex align-items-center gap-1">
    <i class="bi bi-hand-thumbs-up{% if user_post_action and user_post_action.liked %}-fill{% endif %}"></i>
    Like
  </button>

  <!-- Dislike button -->
  <button type="submit" name="action" value="dislike"
          class="btn {% if user_post_action and user_post_action.disliked %}btn-danger{% else %}btn-outline-danger{% endif %} d-flex align-items-center gap-1">
    <i class="bi bi-hand-thumbs-down{% if user_post_action and user_post_action.disliked %}-fill{% endif %}"></i>
    Dislike
  </button>
</form>

<hr class="my-4">




<h2>Popular posts:</h2>

<div class="row g-4 mt-3">
    {% for post in popular_posts %}
    <div class="col-4">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">{{post.title}}</h5>
                <p class="card-text">{{post.content|truncatewords:5}}</p>
                <a href="/posts/{{post.id}}/" class="btn btn-primary">Toliq oqiw</a>
            </div>
        </div>
    </div>
    {% endfor %}
</div>



<div class="modal" tabindex="-1" id="deleteModal" aria-labelledby="deleteModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">"{{ object.title }}" atli postti rastanda oshirejaqsizba?</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
     
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Yaq</button>
        <form method="POST">
        {% csrf_token %}
        <button type="submit" class="btn btn-primary">Awa,oshiriw</button>
        </form>
      </div>
    </div>
  </div>
</div>





{% endblock %}





